syntax = "proto3";

option java_package = "ttgt.schedule.proto";
option java_multiple_files = true;

import "schedule.proto";
import "service.proto";

message LessonUserData {
  bool isOver = 1;
  string notes = 2;
  uint32 subgroup = 3;
}

message WidgetSettings {
  float background = 1;
  uint32 innerPadding = 2;
  ProfileType profileType = 3;
}

message Profile {
	Schedule schedule = 1;
	Overrides overrides = 2;
	string name = 3;
}

message Profiles {
	optional Profile teacher = 1;
	optional Profile student = 2;
}

enum ProfileType {
	UNKNOWN = 0;
	TEACHER = 1;
	STUDENT = 2;
}

message OverrideHistoryElement {
	Overrides overrides = 1;
	string itemName = 2;
}

message Time {
	int32 hours = 1;
	int32 minutes = 2;
}

message CustomLesson {
	string name = 1;
	Time startTime = 2;
	Time endTime = 3;
	bool weeknum = 4;
	int32 weekday = 5;
}

message UserData {
  reserved 1, 2, 3, 5;
  
  map<string, LessonUserData> lessonData = 4;
  map<int32, WidgetSettings> widgets = 6;
  
  Profiles profiles = 7;
  ProfileType lastUsed = 8;
  repeated OverrideHistoryElement overrideHistory = 9;
  int64 firstTimeLaunch = 10;
  bool feedbackSent = 11;
  repeated CustomLesson customLessons = 12;
}
